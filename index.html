<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <meta name="description" content="Blog page for CASK team">
    <style>
        .category-section {
            display: flex;
            gap: 20px;
            padding: 20px;
            background-color: #f8f9fa;
            flex-wrap: wrap;
        }

        .category-card {
            background-color: #fff;
            border-radius: 8px;
            padding: 16px;
            width: 100%;
            max-width: 320px;
            flex: 1 1 calc(33.333% - 20px); /* 3 columns */
        }

        .category-card h2 {
            font-size: 18px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: #333;
        }

        .news-item {
            display: flex;
            gap: 10px;
            margin: 12px 0;
        }

        .news-item img {
            width: 50px;
            height: 50px;
            border-radius: 4px;
        }

        .news-content {
            display: flex;
            flex-direction: column;
        }

        .source {
            font-weight: bold;
            color: #555;
            font-size: 14px;
        }

        .time {
            font-size: 12px;
            color: #888;
        }

        @media (max-width: 768px) {
            .category-section {
                gap: 10px;
                padding: 10px;
            }
            .category-card {
                max-width: 100%;
                flex: 1 1 100%;
            }
        }

        @media (max-width: 480px) {
            .category-section {
                padding: 5px;
                flex-direction: column;
            }
            .news-item {
                flex-direction: column;
                align-items: flex-start;
            }
            .news-item img {
                width: 40px;
                height: 40px;
            }
            .time {
                font-size: 10px;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="date-weather">
            <p>Saturday, 2 November</p>
            <div class="weather">
                <i class="fas fa-sun weather-icon"></i>
                <div class="weather-info">
                    <div class="readerr" style="display: flex; flex-direction: row;">
                        <p id="current-weather" class="temp">00Â°C</p>
                    </div>
                    <p><a href="https://weather.com" target="_blank">Weather.com</a></p>
                </div>
            </div>
        </div>
        <nav class="navbar" id="nnv">
            <ul>
                <li><a href="#" class="active">Home</a></li>
                <li><a href="#">For you</a></li>
                <li><a href="#">Following</a></li>
                <li><a href="#">Ghana</a></li>
                <li><a href="#">World</a></li>
            </ul>
        </nav>
    </header>
    
    <main class="news-container">
        <section class="top-stories">
            <h2>Top stories on Elections</h2>
            <div id="main-story" class="main-story"></div>
            <div id="sub-stories" class="sub-stories"></div>
        </section>
    
        <aside class="picks-for-you">
            <h2>Trending News</h2>
            <div id="picks-container"></div>
        </aside>
    </main>
    
    <div class="category-section">
        <div id="ghana-category" class="category-card">
            <h2>Ghana <i class="fas fa-chevron-right"></i></h2>
            <hr class="smhr">
            <div class="news-items"></div>
        </div>
        <div id="technology-category" class="category-card">
            <h2>Technology <i class="fas fa-chevron-right"></i></h2>
            <hr class="smhr">
            <div class="news-items"></div>
        </div>
        <div id="trending-category" class="category-card">
            <h2>Trending <i class="fas fa-chevron-right"></i></h2>
            <hr class="smhr">
            <div class="news-items"></div>
        </div>
    </div>

    <script>
        const apiKey = "pub_5845288622d66f260848c1d1d3cadeea66ef5";
        const categories = {
            ghana: "Ghana",
            technology: "Technology",
            trending: "Trending"
        };

        async function fetchCategoryNews(category, elementId) {
            const url = `https://newsdata.io/api/1/news?apikey=${apiKey}&q=${category}`;
            try {
                const response = await fetch(url);
                const data = await response.json();
                const newsContainer = document.getElementById(elementId).querySelector(".news-items");

                data.results.slice(0, 3).forEach(article => {
                    const newsItem = document.createElement("div");
                    newsItem.classList.add("news-item");
                    newsItem.innerHTML = `
                        <img src="${article.image_url || 'https://via.placeholder.com/50'}" alt="News Thumbnail">
                        <div class="news-content">
                            <p class="source">${article.source_id}</p>
                            <p>${article.title}</p>
                            <p class="time">${new Date(article.pubDate).toLocaleDateString()}</p>
                        </div>
                    `;
                    newsContainer.appendChild(newsItem);
                });
            } catch (error) {
                console.error(`Error fetching news for ${category}:`, error);
            }
        }

        fetchCategoryNews(categories.ghana, "ghana-category");
        fetchCategoryNews(categories.technology, "technology-category");
        fetchCategoryNews(categories.trending, "trending-category");

        async function fetchTopStories() {
            const url = `https://newsdata.io/api/1/news?apikey=${apiKey}&q=elections`;
            const response = await fetch(url);
            const data = await response.json();
            const mainStoryContainer = document.getElementById("main-story");
            const subStoriesContainer = document.getElementById("sub-stories");

            if (data.results) {
                const [mainStory, ...subStories] = data.results;

                mainStoryContainer.innerHTML = `
                    <img src="${mainStory.image_url || 'https://via.placeholder.com/150'}" alt="Main Story Image">
                    <div class="main-story-content">
                        <p class="source">${mainStory.source_id}</p>
                        <h3>${mainStory.title}</h3>
                        <p class="time">${new Date(mainStory.pubDate).toLocaleString()}</p>
                    </div>
                `;

                subStories.slice(0, 3).forEach(story => {
                    const subStory = document.createElement("div");
                    subStory.classList.add("sub-story");
                    subStory.innerHTML = `
                        <img src="${story.image_url || 'https://via.placeholder.com/50'}" alt="Story Thumbnail" class="outlet-logo">
                        <div>
                            <p class="source">${story.source_id}</p>
                            <p>${story.title}</p>
                            <p class="time">${new Date(story.pubDate).toLocaleString()}</p>
                        </div>
                    `;
                    subStoriesContainer.appendChild(subStory);
                });
            }
        }

        async function fetchTrendingPicks() {
            const url = `https://newsdata.io/api/1/news?apikey=${apiKey}&q=trending`;
            const response = await fetch(url);
            const data = await response.json();
            const picksContainer = document.getElementById("picks-container");

            if (data.results) {
                data.results.slice(0, 3).forEach(pick => {
                    const pickItem = document.createElement("div");
                    pickItem.classList.add("pick");
                    pickItem.innerHTML = `
                        <img src="${pick.image_url || 'https://via.placeholder.com/50'}" alt="Pick Image">
                        <div class="pick-content">
                            <p class="source">${pick.source_id}</p>
                            <p>${pick.title}</p>
                            <p class="time">${new Date(pick.pubDate).toLocaleString()}</p>
                        </div>
                    `;
                    picksContainer.appendChild(pickItem);
                });
            }
        }

        fetchTopStories();
        fetchTrendingPicks();
    </script>
</body>
</html>
